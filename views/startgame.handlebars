 <!DOCTYPE html>
<html lang="en">
<head>
    <script type = "text/javascript" src = "phaser.min.js"></script>
    <script type = "text/javascript" src = "start.js"></script>
    <script type = "text/javascript" src = "music.js"></script>
    <script type = "text/javascript" src = "pause.js"></script>
    <script type = "text/javascript" src = "scene1.js"></script>
    <script type = "text/javascript" src = "scene2.js"></script>
    <script type = "text/javascript" src = "scene3.js"></script>
    <script type = "text/javascript" src = "gameover.js"></script>
    <script type = "text/javascript" src = "victory.js"></script>       
    <script type = "text/javascript" src = "instructions.js"></script>
    <script type = "text/javascript" src = "game.js"></script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style.css" />
    <title>isGame:True</title>
</head>
<body>
    <ul>
      <a href="#" id="logout-link" type="button" class="btn btn-light" >LOGOUT</a>
    </ul>
    <ul>
      <a href="#" id="submitScore" type="button" class="btn btn-light" >Submit Score</a>
    </ul>
  {{{ body }}}
  <div id="thegame"></div>
</body>
</html>

<script>

const submitScore = async function() {
    {{!-- console.log(totalScore) --}}

    // TODO: figure out how to grab score from phaser
    const score = totalScore;

    if (score) {
      // Send a POST request to the API endpoint
      const response = await fetch('/api/score/submit', {
        method: 'POST',
        body: JSON.stringify({scoreValue: score }),
        headers: { 'Content-Type': 'application/json' },
      });
  
      if (response.ok) {
        document.location.replace('/scores');
      } else {
        console.log(response.statusText);
      }
       {{!-- window.location.reload() --}}
    }
  };
  
  document.querySelector('#submitScore').addEventListener('click', submitScore);
</script>
